[gd_scene load_steps=9 format=3 uid="uid://dqgdr7rlpb0rl"]

[ext_resource type="Script" path="res://addons/enhanced_state_chart/scripts/states/composites/state_chart.gd" id="1_2hwpr"]
[ext_resource type="Script" path="res://addons/enhanced_state_chart/scripts/states/composites/compound_state.gd" id="2_4tsff"]
[ext_resource type="Script" path="res://addons/enhanced_state_chart/scripts/transitions/event_transition.gd" id="3_33qot"]
[ext_resource type="Script" path="res://addons/enhanced_state_chart/scripts/actions/state_actions/animation_player_action.gd" id="5_ggx5s"]
[ext_resource type="Script" path="res://addons/enhanced_state_chart/scripts/states/atomic_state.gd" id="6_1sufk"]

[sub_resource type="Animation" id="Animation_rf16e"]
resource_name = "SwitchOff"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CheckButton:button_pressed")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_o8g8k"]
resource_name = "SwitchOn"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CheckButton:button_pressed")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_5hb7g"]
_data = {
"SwitchOff": SubResource("Animation_rf16e"),
"SwitchOn": SubResource("Animation_o8g8k")
}

[node name="LightSwitch" type="Node2D"]

[node name="Root" type="Node" parent="."]
process_mode = 3
script = ExtResource("1_2hwpr")

[node name="LightState" type="Node" parent="Root"]
process_mode = 3
script = ExtResource("2_4tsff")
initial_state_path = NodePath("Off")

[node name="Off" type="Node" parent="Root/LightState"]
process_mode = 3
script = ExtResource("6_1sufk")

[node name="Pressed" type="Node" parent="Root/LightState/Off"]
script = ExtResource("3_33qot")
source_path = NodePath("../../../../Button")
signal_name = "pressed"
to_path = NodePath("../../On")
debug = true

[node name="AnimationPlayer" type="Node" parent="Root/LightState/Off" node_paths=PackedStringArray("animation_player")]
script = ExtResource("5_ggx5s")
animation_player = NodePath("../../../../SwitchAnimation")
animation_name = "SwitchOff"

[node name="On" type="Node" parent="Root/LightState"]
script = ExtResource("6_1sufk")

[node name="Pressed" type="Node" parent="Root/LightState/On"]
script = ExtResource("3_33qot")
source_path = NodePath("../../../../Button")
signal_name = "pressed"
to_path = NodePath("../../Off")

[node name="AnimationPlayer" type="Node" parent="Root/LightState/On" node_paths=PackedStringArray("animation_player")]
script = ExtResource("5_ggx5s")
animation_player = NodePath("../../../../SwitchAnimation")
animation_name = "SwitchOn"

[node name="Camera2D" type="Camera2D" parent="."]

[node name="Button" type="Button" parent="."]
offset_right = 225.0
offset_bottom = 31.0
text = "Flick"

[node name="CheckButton" type="CheckButton" parent="."]
offset_left = 16.0
offset_top = 49.0
offset_right = 60.0
offset_bottom = 73.0
button_pressed = true

[node name="SwitchAnimation" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_5hb7g")
}
